# Audyt Form -> API (wstepny, na podstawie nazw plikow)

Poniższa tabela jest generowana na podstawie nazw plików Form i wymaga weryfikacji w kodzie każdego formularza.

| Form | Obszar (na podstawie nazwy pliku) | Pokrycie w API | Uwagi |
| --- | --- | --- | --- |
| `AddEntryForm.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `BaseForm.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `DpdCourierPanelForm.cs` | Kurierzy/Przesylki | Brak | Wymaga weryfikacji w kodzie. |
| `Form1.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form10.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form11.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form12.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form13.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form14.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form15.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form16.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form17.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form18.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form19.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form2.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form20.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form3.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form4.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form5.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form6.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form7.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form8.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `Form9.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormAllegroApiTester.cs` | Allegro | Brak | Wymaga weryfikacji w kodzie. |
| `FormAllegroChat.cs` | Allegro | Brak | Wymaga weryfikacji w kodzie. |
| `FormAllegroIssue.cs` | Allegro | Brak | Wymaga weryfikacji w kodzie. |
| `FormAllegroIssue_NEW.cs` | Allegro | Brak | Wymaga weryfikacji w kodzie. |
| `FormAllegroManager.cs` | Allegro | Brak | Wymaga weryfikacji w kodzie. |
| `FormAllegroReturns.cs` | Zwroty | ReturnsController | Wymaga weryfikacji w kodzie. |
| `FormAllegroWizard.cs` | Allegro | Brak | Wymaga weryfikacji w kodzie. |
| `FormApiConfig.cs` | Ustawienia/Konfiguracja | Brak | Wymaga weryfikacji w kodzie. |
| `FormAutoConfig.cs` | Ustawienia/Konfiguracja | Brak | Wymaga weryfikacji w kodzie. |
| `FormAutoMatchFv.cs` | Faktury | Brak | Wymaga weryfikacji w kodzie. |
| `FormComplaintProcess.cs` | Reklamacje/Zgloszenia | ZgloszeniaController | Wymaga weryfikacji w kodzie. |
| `FormDashboard.cs` | Panel/Dashboard | Brak | Wymaga weryfikacji w kodzie. |
| `FormDatabaseDiagnostics.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormDecyzjaSprzet.cs` | Decyzje | Brak | Wymaga weryfikacji w kodzie. |
| `FormDodajDoMagazynu.cs` | Magazyn | WarehouseController | Wymaga weryfikacji w kodzie. |
| `FormDodajDzialanie.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormDodajEdytujKontoAllegro.cs` | Allegro | Brak | Wymaga weryfikacji w kodzie. |
| `FormDodajKonto.cs` | Konta | Brak | Wymaga weryfikacji w kodzie. |
| `FormDodajNadwyzke.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormDodajPrzypomnienie.cs` | Przypomnienia | Brak | Wymaga weryfikacji w kodzie. |
| `FormDodajZwrotReczny.cs` | Zwroty | ReturnsController | Wymaga weryfikacji w kodzie. |
| `FormDpdTracking.cs` | Kurierzy/Przesylki | Brak | Wymaga weryfikacji w kodzie. |
| `FormEditAction.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormEdytorPodpisu.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormEmail.cs` | Email | Brak | Wymaga weryfikacji w kodzie. |
| `FormFileViewer.cs` | Pliki | FilesController | Wymaga weryfikacji w kodzie. |
| `FormHandlowiecSzczegoly.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormHandlowiecSzczegolyReczny.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormHistoria.cs` | Historia | Brak | Wymaga weryfikacji w kodzie. |
| `FormInputBox.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormKontoUstawienia.cs` | Ustawienia/Konfiguracja | Brak | Wymaga weryfikacji w kodzie. |
| `FormMagazynAction.cs` | Magazyn | WarehouseController | Wymaga weryfikacji w kodzie. |
| `FormMailProgressr.cs` | Email | Brak | Wymaga weryfikacji w kodzie. |
| `FormNowaWiadomosc.cs` | Wiadomosci | MessagesController | Wymaga weryfikacji w kodzie. |
| `FormOdrzucZwrot.cs` | Zwroty | ReturnsController | Wymaga weryfikacji w kodzie. |
| `FormParujTelefon.cs` | Parowanie/QR | Brak | Wymaga weryfikacji w kodzie. |
| `FormPhoneGallery.cs` | Telefon | Brak | Wymaga weryfikacji w kodzie. |
| `FormPodgladEmail.cs` | Email | Brak | Wymaga weryfikacji w kodzie. |
| `FormPodsumowanieZwrotu.cs` | Zwroty | ReturnsController | Wymaga weryfikacji w kodzie. |
| `FormPolaczenie.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormPowiadomieniaToast.cs` | Wiadomosci | MessagesController | Wymaga weryfikacji w kodzie. |
| `FormPowiadomieniePrzesylka.cs` | Wiadomosci | MessagesController | Wymaga weryfikacji w kodzie. |
| `FormProduktSelect.cs` | Produkty/Czesci | Brak | Wymaga weryfikacji w kodzie. |
| `FormProgress.cs` | Progress | Brak | Wymaga weryfikacji w kodzie. |
| `FormPrompt.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormPrzypomnienia.cs` | Przypomnienia | Brak | Wymaga weryfikacji w kodzie. |
| `FormPrzypomnieniePopup.cs` | Przypomnienia | Brak | Wymaga weryfikacji w kodzie. |
| `FormQrPairing.cs` | Parowanie/QR | Brak | Wymaga weryfikacji w kodzie. |
| `FormReportToManufacturer.cs` | Raporty | Brak | Wymaga weryfikacji w kodzie. |
| `FormSkrzynka.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormSmsPopup.cs` | SMS | Brak | Wymaga weryfikacji w kodzie. |
| `FormSmsPopup_BACKUP_ORIGINAL.cs` | SMS | Brak | Wymaga weryfikacji w kodzie. |
| `FormSmsPopup_NAPRAWIONY.cs` | SMS | Brak | Wymaga weryfikacji w kodzie. |
| `FormSnoozeWybor.cs` | Przypomnienia | Brak | Wymaga weryfikacji w kodzie. |
| `FormSpellCheckTest.cs` | SpellCheck | Brak | Wymaga weryfikacji w kodzie. |
| `FormStanMagazynowy.cs` | Magazyn | WarehouseController | Wymaga weryfikacji w kodzie. |
| `FormSzablonyDzialan.cs` | Szablony | Brak | Wymaga weryfikacji w kodzie. |
| `FormSzablonyEmail.cs` | Email | Brak | Wymaga weryfikacji w kodzie. |
| `FormSzczegolyCzesci.cs` | Produkty/Czesci | Brak | Wymaga weryfikacji w kodzie. |
| `FormTemplateEditor.cs` | Szablony | Brak | Wymaga weryfikacji w kodzie. |
| `FormUniversalWizard.cs` | Wizard | Brak | Wymaga weryfikacji w kodzie. |
| `FormUniversalWizardV2.cs` | Wizard | Brak | Wymaga weryfikacji w kodzie. |
| `FormUploader.cs` | Pliki | FilesController | Wymaga weryfikacji w kodzie. |
| `FormUstawienia.cs` | Ustawienia/Konfiguracja | Brak | Wymaga weryfikacji w kodzie. |
| `FormWiadomosci.cs` | Wiadomosci | MessagesController | Wymaga weryfikacji w kodzie. |
| `FormWiadomosci_ULTRA_SIMPLE.cs` | Wiadomosci | MessagesController | Wymaga weryfikacji w kodzie. |
| `FormWiadomosciodl.cs` | Wiadomosci | MessagesController | Wymaga weryfikacji w kodzie. |
| `FormWprowadzNumer.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormWybierzCzesc.cs` | Produkty/Czesci | Brak | Wymaga weryfikacji w kodzie. |
| `FormWybierzProdukt.cs` | Produkty/Czesci | Brak | Wymaga weryfikacji w kodzie. |
| `FormWybierzZgloszenie.cs` | Reklamacje/Zgloszenia | ZgloszeniaController | Wymaga weryfikacji w kodzie. |
| `FormWyswietlAdresy.cs` | Adresy | Brak | Wymaga weryfikacji w kodzie. |
| `FormWyswietlWiadomosc.cs` | Wiadomosci | MessagesController | Wymaga weryfikacji w kodzie. |
| `FormZarzadzajKontami.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormZarzadzajStatusami.cs` | Statusy | Brak | Wymaga weryfikacji w kodzie. |
| `FormZglosNieobecnosc.cs` | Inne | Brak | Wymaga weryfikacji w kodzie. |
| `FormZmienHaslo.cs` | Auth/Uzytkownicy | AuthController | Wymaga weryfikacji w kodzie. |
| `FormZwrotPodsumowanie.cs` | Zwroty | ReturnsController | Wymaga weryfikacji w kodzie. |
| `FormZwrotSzczegoly.cs` | Zwroty | ReturnsController | Wymaga weryfikacji w kodzie. |
| `FormZwrotWplaty.cs` | Zwroty | ReturnsController | Wymaga weryfikacji w kodzie. |
| `LoginForm.cs` | Auth/Uzytkownicy | AuthController | Wymaga weryfikacji w kodzie. |
| `QR_SYNC_IMPLEMENTATION/WINDOWS/FormQrSync.cs` | Parowanie/QR | Brak | Wymaga weryfikacji w kodzie. |
| `RegisterForm.cs` | Auth/Uzytkownicy | AuthController | Wymaga weryfikacji w kodzie. |
| `SyncProgressForm.cs` | Progress | Brak | Wymaga weryfikacji w kodzie. |
| `WyszukiwarkaZgloszenForm.cs` | Reklamacje/Zgloszenia | ZgloszeniaController | Wymaga weryfikacji w kodzie. |

## Mapowanie do API (obecny stan kontrolerow)

W projekcie API istnieja nastepujace kontrolery (tylko one wystawiaja endpointy):
- AuthController (logowanie, tokeny): `ReklamacjeAPI/Controllers/AuthController.cs`
- ZgloszeniaController (zgłoszenia/reklamacje): `ReklamacjeAPI/Controllers/ZgloszeniaController.cs`
- KlienciController (klienci): `ReklamacjeAPI/Controllers/KlienciController.cs`
- FilesController (pliki): `ReklamacjeAPI/Controllers/FilesController.cs`
- ReturnsController (zwroty): `ReklamacjeAPI/Controllers/ReturnsController.cs`
- MessagesController (wiadomosci): `ReklamacjeAPI/Controllers/MessagesController.cs`
- WarehouseController (magazyn): `ReklamacjeAPI/Controllers/WarehouseController.cs`

To oznacza, ze wszystkie Formy niepasujace do tych obszarow (Allegro, DPD, szablony, raporty, konfiguracja, wizardy itd.) nie maja jeszcze bezposredniego API.

## Lista brakujacych endpointow (na podstawie Form i kontrolerow)

Poniższa lista jest wstepna i wynika z porownania nazw Form z istniejacymi kontrolerami API:

1. **Magazyn** – `WarehouseController` istnieje, ale endpointy zwracaja 501 (niezaimplementowane). Brakuje pelnej obslugi stanów magazynowych, przyjec, wyszukiwania i akcji magazynowych.
2. **Allegro** – brak API dla: Allegro chat, zwroty Allegro (poza ogolnym Returns API), issues/disputes, manager, wizard, konta Allegro.
3. **DPD/Przesylki** – brak API dla sledzenia przesylek, powiadomien, panelu kuriera.
4. **Szablony/Email/SMS** – brak API do zarzadzania szablonami, wysylki emaili/SMS, edytora podpisu, podgladu email.
5. **Konfiguracja/Ustawienia** – brak API dla ustawien aplikacji, konfiguracji kont i integracji.
6. **Raporty/Historia** – brak API dla raportow i historii operacji.
7. **Wizard/Progress/Prompt** – brak API (prawdopodobnie UI-only).
8. **QR/Parowanie** – brak API do zarzadzania parowaniem i synchronizacja QR.

## Audyt logiki – wstepne znalezione ryzyka i propozycje zmian

Poniższe punkty to wstepny audyt logiki na podstawie istniejacych plikow. Wymagaja dalszej weryfikacji w kodzie kazdego Form:

1. **Generowanie numeru zwrotu (ReferenceNumber)**
   - Zarowno Form (`FormDodajZwrotReczny.cs`), jak i API (`ReturnsService`) generuja numer poprzez odczyt ostatniego rekordu i inkrementacje.
   - Ryzyko: race-condition przy rownoleglych zapisach (duplikaty numerow).
   - Propozycja: przeniesc generowanie numeru do transakcji z blokada lub sekwencja w DB.

2. **Nazwy kolumn w Wiadomosci**
   - W bazie wystepuja rozbieznosci `CzyPrzeczytana` vs `CzyOdczytana`.
   - API obsluguje oba warianty, ale brak jednolitej migracji.
   - Propozycja: ustalic jedna nazwe i naprawic schemat (skrypty SQL).

3. **Powiazanie zwrotu z reklamacja (ForwardToComplaints)**
   - API tworzy Zgloszenie i przypisuje je do zwrotu.
   - Potencjalne ryzyko: brak walidacji czy zwrot juz ma zgloszenie; mozliwe duplikaty.
   - Propozycja: dodac blokade/warunek, ze zwrot bez zgloszenia lub update istniejącego.

4. **Logowanie decyzji i dzialan**
   - Zwroty loguja dzialania do `ZwrotDzialania`, ale część Form moze logowac w inny sposob.
   - Propozycja: ujednolicic format tresci i dodac typ/klucz akcji w DB.

